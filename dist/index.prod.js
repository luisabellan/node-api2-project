"use strict";var express=require("express"),posts=require("./data/db"),server=express();server.use(express.json()),server.get("/",function(e,t){return t.send("API up and running!")}),server.post("/api/posts",function(e,t){if(!e.body.title||!e.body.contents)return t.status(400).json({errorMessage:"Please provide title and contents for the post."});posts.insert(e.body).then(function(e){t.status(201).json(e)}).catch(function(e){return console.log(e),t.status(500).json({error:"There was an error while saving the post to the database"})})}),server.post("/api/posts/:id/comments",function(e,t){return posts.findById(e.body.post_id)?e.body.text?void posts.insertComment(e.body).then(function(e){return t.status(201).json(e)}).catch(function(e){return console.log(e),t.status(500).json({error:"There was an error while saving the comment to the database"})}):t.status(400).json({errorMessage:"Please provide text for the comment."}):t.status(404).json({message:"The post with the specified ID does not exist."})}),server.get("/api/posts",function(e,t){posts.find().then(function(e){t.status(200).json(e)}).catch(function(e){return console.log(e),t.status(500).json({error:"The posts information could not be retrieved."})})}),server.get("/api/posts/:id",function(e,t){posts.findById(e.params.id).then(function(e){return console.log(e),0===e.length?t.status(404).json({message:"The post with the specified ID does not exist."}):t.status(200).json(e)}).catch(function(e){return console.log(e),t.status(500).json({error:"The post information could not be retrieved."})})}),server.listen(8e3,function(){return console.log("API running on port 8000")});